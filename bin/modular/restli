#!/bin/sh

GIT_SKELETON="git://gitli.corp.linkedin.com/restli-skeleton/restli-skeleton.git"
SKELETON_PROPERTIES_PATH="src/main/g8/default.properties"

skeleton=$GIT_SKELETON

err() {
  echo "$@" >&2
}

help () {
  name=`basename $0`
  err "Usage : $name <command>" 
  err "Available commands:"
  echo "   new [skeleton file path or git-url] - Generate a new rest.li project skeleton.\n"
}

dir=`dirname $0`
parent=$(cd $dir/..; pwd)
if [ -r $parent/$SKELETON_PROPERTIES_PATH ]; then
  echo "[This appears to be local development checkout.  Using $parent skeleton]"
  skeleton="file://$parent"
fi

if [ $# -lt 1 ]; then
  help
  exit 1
fi

COMMAND="$1"
case $COMMAND in
"new") 
   if [ $# -ge 2 ]; then
     skeleton=$2
   fi
   g8 $skeleton
   ;;
*) 
   err "Unrecognized command: $COMMAND\n"
   help
   ;;
esac
